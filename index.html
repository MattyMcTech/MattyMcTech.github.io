<!DOCTYPE html>
<html lang="en">
<head>
<base href="https://pixelconquest.world/">
<title>PixelConquest: Global Domination</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  /* ... (previous styles remain unchanged) ... */

  /* Mobile Styles */
  @media (max-width: 768px) {
    .container {
      padding: 0;
      overflow: hidden;
      width: 100vw;
      height: calc(100vh - 100px); /* Adjust based on your header height */
    }
    .grid-wrapper {
      padding: 0;
      border: none;
      border-radius: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      -webkit-overflow-scrolling: touch; /* For smoother scrolling on iOS */
    }
    .grid {
      grid-template-columns: repeat(50, 20px);
      grid-template-rows: repeat(50, 20px);
      gap: 0;
    }
    .cell {
      width: 20px;
      height: 20px;
    }
    .flag {
      background-size: 20px 20px;
    }
  }
</style>
</head>
<body>
<!-- ... (HTML structure remains unchanged) ... -->

<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<script>
// ... (previous JavaScript code remains unchanged) ...

// Check if it's a mobile device
if (/Mobi|Android/i.test(navigator.userAgent)) {
  const gridWrapper = document.querySelector('.grid-wrapper');
  let isScrolling = false;
  let lastX, lastY;
  let rafId = null;

  function onTouchMove(e) {
    if (!isScrolling) return;

    const touch = e.touches[0];
    const moveX = touch.pageX - lastX;
    const moveY = touch.pageY - lastY;

    lastX = touch.pageX;
    lastY = touch.pageY;

    if (rafId) {
      cancelAnimationFrame(rafId);
    }

    rafId = requestAnimationFrame(() => {
      gridWrapper.scrollLeft -= moveX;
      gridWrapper.scrollTop -= moveY;
    });
  }

  gridWrapper.addEventListener('touchstart', (e) => {
    isScrolling = true;
    lastX = e.touches[0].pageX;
    lastY = e.touches[0].pageY;
  }, { passive: true });

  gridWrapper.addEventListener('touchmove', onTouchMove, { passive: false });

  gridWrapper.addEventListener('touchend', () => {
    isScrolling = false;
    if (rafId) {
      cancelAnimationFrame(rafId);
    }
  }, { passive: true });

  // Prevent default touch behavior to avoid browser-level scrolling interference
  gridWrapper.addEventListener('touchmove', (e) => {
    e.preventDefault();
  }, { passive: false });
}
</script>
</body>
</html>
